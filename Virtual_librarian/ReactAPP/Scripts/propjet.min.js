/*!
 propjet.js v1.3.4
 (c) 2015 Artem Avramenko. https://github.com/ArtemAvramenko/propjet.js
 License: MIT
*/
this.propjet=function(){function a(a){throw new Error(["This browser does not support property creation. Instead, use function mode.","Attempt to write readonly property","Circular dependency detected","Recursive property write","Circular promises detected"][a])}function b(){a(1)}function c(a,b){if(null==b)return a.__prop__ver__;a.__prop__ver__=b}function d(a,b,c,d){h(a,b,{configurable:!0,enumerable:!0,get:c,set:d})}function e(a){if(null!=a){var b=typeof a;if("object"===b||"function"===b){var c=1,d=l(a);return null!=d&&d<2147483647&&(c+=d),m(a,c),c}}}var f,g="__prop__ver__",h=Object.defineProperty,i=Object.getOwnPropertyNames,j=Object.getOwnPropertyDescriptor,k=!(h&&i&&j);f=[].forEach?function(a,b){return a.forEach(b)}:function(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)};var l,m;if(k){var n="propertyIsEnumerable",o={};o[n]=0;for(var p in o);p||(l=function(a){var b=a[n];return b&&b[g]},m=function(a,b){if(!b){var c=a[n];a[n]=function(a){return c(a)}}a[n][g]=b})}else m=function(a,b){b<2?h(a,g,{value:b,configurable:!1,writable:!0}):c(a,b)};l||(l=c),m||(m=c);var q,r=0,s=function(c,g){function h(a){var b=null!=a&&a.__prop__unready__;return b&&delete a.__prop__unready__,b}function m(g,i,j){function m(a,b,c){if(a===q)return 1;if(null==a)return 2;if(0===b&&null==c){for(var d in a)return 0;return 3}return"number"==typeof a&&isNaN(a)?4:0}function n(a,b){if(!i.src)return!1;var d=i.vals&&i.vals.length===i.src.length,e=!d;return f(i.src,function(f,g){var h,j=e?q:i.vals[g];if(h=b?b(f,[null!=j?j.val:q]):f.call(c,null!=j?j.val:q),a[g]=h,d){var k=m(j.val,j.len,j.ver),n=m(h,null!=h?h.length:q,h?l(h):q);d=k?k===n&&!j.len:!n&&j.val===h&&j.ver===l(h)&&j.len===h.length}}),d}function o(a){var b=[];f(a,function(a,c){b[c]={val:a,ver:null!=a?l(a):q,len:null!=a?a.length:q}}),i.vals=b}function p(){function e(a){if(0===arguments.length)return l();m(a)}function f(a){return i.fltr?i.fltr.call(c,a,i.res):a}function l(){var b=i.lvl;if(b>0){if(b===r)return i.res;a(2)}r++;try{i.lvl=r;var d=[],e=n(d);if(i.get){if(!e){var g=i.get.apply(c,d);g=f(g),i.src&&o(d),i.res=g}}else i.init&&(i.src&&e||(i.res=i.init.apply(c,d)),i.src?o(d):i.init=q);return i.res}finally{r--,i.lvl=b}}function m(d){i.lvl&&a(3),r++;try{if(i.lvl=-1,h(d))return void(i=d);if(d=f(d),i.get)i.set||b();else if(i.src){var e=[];n(e),o(e)}else i.init=q;i.set&&i.set.call(c,d),i.get||(i.res=d)}finally{r--,i.lvl=0}}if(j)return g&&(c[g]=e),e;k&&a(0),d(c,g,l,m)}function s(){function f(a){return i.fltr?p(i.fltr,[a,y.last]):a}function m(a){d(x,a,function(){return y[a]},b)}function p(b,d){w&&a(4),w=!0;try{return b.apply(c,d||[])}finally{w=!1}}function r(a){y.pending=!a,y.fulfilled=1===a,y.rejected=2===a,y.settled=!!a}function s(a,b){e(x||y);var c=2!==b;c&&(b||(a=f(a)),y.last=a),y.rejectReason=c?q:a,r(c?1:2)}function t(a){var b=e(i);if(!a)return void s(q,0);a.then(function(a){l(i)===b&&s(a,0)},function(a){l(i)===b&&s(a,2)})}function u(a){if(!w){var b=[];n(b,p)||(a=!0,i.init&&(y.last=p(i.init,b))),a&&(e(x||y),o(b),v=p(i.get,b),r(0),t(v))}}var v,w,x,y={};if(y.get=function(a){return a&&!y.pending&&u(a),v},y.set=function(a,c){i.set||b(),a=f(a),e(x||y);var d=[];n(d,p),o(d),d.unshift(a);var g=p(i.set,d);return c||(y.last=a),t(g),g},s(q,1),j){var z=function(){return u(),y};return g&&(c[g]=z),z}k&&a(0),x={};for(var A in y)m(A);d(c,g,function(){return u(),x},function(a){h(a)?(i=a,s(q,1)):b()})}return i.isDeferred?s():p()}var n;if(c&&!g)return k&&a(0),void f(i(c),function(a){var b=j(c,a);b&&b.get||(n=c[a],h(n)&&m(a,n))});n={};var o={from:function(){return n.isDeferred=!0,n.src=[],o},require:function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return n.src=a,o},get:function(a){return n.get=a,o},set:function(a){return n.set=a,o},declare:function(a){return a?m(g,n,!0):g?void m(g,n):(n.__prop__unready__=!0,n)}};return o.with=o.withal=function(a){return n.fltr=a,o},o.default=o.defaults=function(a){return n.init=a,o},o};return s.invalidate=e,s}();